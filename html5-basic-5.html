<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>html5 basic test five.</title>
	<script src="Common.js"></script>
	<style>
		html, body {
			height: 100%;
		}
		body {
			margin:0;
		}
		ul {
			margin-top:0;
			margin-bottom:0;
			padding-left: 0;
		}
		li {
			list-style: none;
		}
		
		#box, .section, .section-box {
			width:100%;
			height:100%;
		}
		.section {
			overflow:hidden;
		}
		.block:first-child {
			background:#A051E1;
		}
		.block:nth-child(2) {
			background:#19E184;
		}
		.block:last-child {
			background:#2DBEE1;
		}
	</style>
	<script>
		window.onload = function() {

			var flag = true,
				blocks = document.querySelectorAll('.block'),
				section = document.querySelector('.section'),
				sectionBox = document.querySelector('.section-box');

			for(var i=0,len=blocks.length; i<len; i++) {
				blocks[i].style.height = section.offsetHeight + 'px';
			}
			sectionBox.style.height = (section.offsetHeight * len) + 'px';

			window.onmousewheel = document.onmousewheel = function(e) {

				var	detail = e.wheelDelta;

				if(detail > 0 && flag) { //top

					if(sectionBox.offsetTop === 0) return;
					flag = false;
					$$.buffer(sectionBox, {marginTop: sectionBox.offsetTop + section.offsetHeight}, 15, function() {
						flag = true;
					});
					
				}

				if(detail < 0 && flag) { //bottom
					
					if(Math.abs(sectionBox.offsetTop) + section.offsetHeight >= sectionBox.offsetHeight) return;
					flag = false;
					$$.buffer(sectionBox, {marginTop: sectionBox.offsetTop - section.offsetHeight}, 15, function() {
						flag = true;
					});
				}

				e.preventDefault();

			};

		};
	</script>
</head>
<body>
	<section id="box">
		<div class="section">
			<div class="section-box">
				<div class="block">i'm first page.</div>
				<div class="block">i'm second page.</div>
				<div class="block">i'm third page.</div>
			</div>
		</div>
		<ul class="guides">
			<li></li>
			<li></li>
			<li></li>
		</ul>
	</section>
</body>
</html>